<section class="root-base" id="lobby-background">
    <app-header ></app-header>

    <div class="game-container">
      <!-- 廣播元件 -->
      <img src="/assets/imgs/segTop.png" alt="segTop">
      <div class="marquee-bg">
        <img src="/assets/imgs/iconMarqueeSpeaker@2x.png">
      </div>

      <!-- 遊戲種類選擇元件 -->
      <div class="menu-container" style="margin-left: 0">
          <button id="game-filter-bg" class="row-flex"
          (popperOnShown)="toggleMenuOnShow()"
          (popperOnHidden)="toggleMenuOnShow()"
          [popper]="popperSetting"
          [popperTrigger]="'click'"
          [popperHideOnClickOutside]="true"
          [popperHideOnScroll]="true"
          [popperDisableStyle]="true"
          [popperPlacement]="'bottom'"
          [popperStyles]="{
          background: 'url(\' /assets/imgs/picGameMenuBgExpand.png\')',
          'background-size': '100% 100%',
          'background-repeat': 'no-repeat',
          'width': '43%',
          'min-height': '140px',
          'max-height': '160px',
          'height': '27%',
          'z-index': 2
          }"
          [popperModifiers]="{
            offset: {
              enabled: true,
              offset: '0px,-31px'
            },
            flip: {
              enabled: false,
              behavior: ['right','left','top']
            },
            preventOverflow: {
              escapeWithReference: true
            }
          }">

            <span class="basic-text-style" id="menu-text" >{{('lobby.' + getMenuSelect().value) | translate}}</span>
            <img [src]="menuShow === false ?
                        '/assets/imgs/iconGameMenuDown.png' :
                        '/assets/imgs/iconGameMenuUp.png'"  [ngStyle]="{'margin-top': menuShow === false ? '2px' : '0px', 'padding-right': '8.3%'}">

          </button>
          <!-- poppup setting content padding-top: 11px;-->
          <popper-content #popperSetting >
            <div class="unselectable" id="menuPopup">
              <ng-container *ngFor="let option of menuList">
                  <div class="menu-option-bg" (click)="popperSetting.hide();setMenuSelect(option.value)">
                      <span class="basic-text-style " style="padding-left: 9.6%">{{('lobby.' + option.value) | translate}}</span>
                  </div>
              </ng-container>
            </div>
          </popper-content>
      </div>



      <!-- 遊戲顯示元件  -->
      <div id="normal-game-container" (mousedown)="startScroll($event)" (touchstart)="startTouch($event)">
          <!-- <div class="margin-left"></div> -->
          <ng-container *ngFor="let item of getHotGame();let first = first">
            <div id="hot-game-frame" *ngIf="first" [routerLink]="['/game' ,item.gameCategory ,item.gameName ]">
              <img id="hot-Tag" [src]="'lobby.hotGameTag' | translate" draggable="false">
              <img id="hot-pic" [src]="item.gameImgUrl" draggable="false">
              <img id="hot-frame" src="/assets/imgs/picGameFrameLarge.png" draggable="false">
            </div>
          </ng-container>


          <ng-container *ngFor="let item of getNormalGame()">
            <div class="normal-game-frame" [routerLink]="['/game' ,item.gameCategory ,item.gameName]">
              <img class="normal-pic" [src]="item.gameImgUrl" draggable="false">
              <img id="normal-frame" src="/assets/imgs/picGameFrameSmall.png" draggable="false">
            </div>
          </ng-container>
      </div>

      <!-- 輪播牆元件 -->
      <div class="row-flex carousel-container">
          <div id="carouselExampleIndicators" class="carousel slide"
          data-ride="carousel"  data-interval="5000" data-wrap="true" data-pause="hover">
            <ol class="carousel-indicators" >
              <ng-container *ngFor="let item of getCarouselGame();let index = index;let first = first">
                <li data-target="#carouselExampleIndicators" [attr.data-slide-to]="index" [ngClass]="{'active': first}"></li>
              </ng-container>
            </ol>
            <div class="carousel-inner" >
              <ng-container *ngFor="let item of getCarouselGame();let first = first">
                  <div [ngClass]="{'active': first, 'carousel-item': true}" >
                      <div class="banner-game-frame">
                          <img class="carousel-content"  [src]="item.gameImgUrl" alt="First slide"  draggable="false">
                          <img class="carousel-frame" src="/assets/imgs/picBannerFrame.png"  draggable="false">
                      </div>
                  </div>
              </ng-container>
            </div>
          </div>
      </div>
    </div>

    <app-nav-bar></app-nav-bar>

    <!-- 登出元件 -->
    <div id="logout-box" hidden>
      <div class="confirm-box">

        <img class="leaveBtn" draggable="false" src="/assets/imgs/btnLogoutLeaveNormal.png" alt="YES"
            (mousedown) ="setClosePressed($event)"
            (touchend)  ="setClosePressed($event)"
            (touchstart)="setCloseNormal($event)"
            (mouseup)   ="setCloseNormal($event)"
            (mouseleave)="setCloseNormal($event)"
            (click)     ="closeLogoutBox()"
        >

        <div class="text-center text-message">{{ 'lobby.logoutMessage' | translate }}</div>

        <div class="img-btn d-flex justify-content-around">
          <img draggable="false" [src]="'lobby.yesImgNormal' | translate " alt="YES"
            (mousedown) ="setYesPressed($event)"
            (touchend)  ="setYesPressed($event)"
            (touchstart)="setYesNormal($event)"
            (mouseup)   ="setYesNormal($event)"
            (mouseleave)="setYesNormal($event)"
            (click)     ="logout()"
          >
          <img draggable="false" [src]=" 'lobby.noImgNormal' | translate " alt="NO"
            (mousedown) ="setNoPressed($event)"
            (touchend)  ="setNoPressed($event)"
            (touchstart)="setNoNormal($event)"
            (mouseup)   ="setNoNormal($event)"
            (mouseleave)="setNoNormal($event)"
            (click)     ="closeLogoutBox()"
            >
        </div>

      </div>
    </div>

    <!-- 離開元件 -->
    <div id="leave-box" hidden>
      <div class="confirm-box">

        <img class="leaveBtn" draggable="false" src="/assets/imgs/btnLogoutLeaveNormal.png" alt="YES"
            (mousedown) ="setClosePressed($event)"
            (touchend)  ="setClosePressed($event)"
            (touchstart)="setCloseNormal($event)"
            (mouseup)   ="setCloseNormal($event)"
            (mouseleave)="setCloseNormal($event)"
            (click)     ="closeLeaveBox()"
        >

        <div class="text-center text-message">{{ 'lobby.logoutMessage' | translate }}</div>

        <div class="img-btn d-flex justify-content-around">
          <img draggable="false" [src]="'lobby.yesImgNormal' | translate " alt="YES"
            (mousedown) ="setYesPressed($event)"
            (touchend)  ="setYesPressed($event)"
            (touchstart)="setYesNormal($event)"
            (mouseup)   ="setYesNormal($event)"
            (mouseleave)="setYesNormal($event)"
            (click)     ="leave()"
          >
          <img draggable="false" [src]=" 'lobby.noImgNormal' | translate " alt="NO"
            (mousedown) ="setNoPressed($event)"
            (touchend)  ="setNoPressed($event)"
            (touchstart)="setNoNormal($event)"
            (mouseup)   ="setNoNormal($event)"
            (mouseleave)="setNoNormal($event)"
            (click)     ="closeLeaveBox()"
            >
        </div>

      </div>
    </div>


</section>



